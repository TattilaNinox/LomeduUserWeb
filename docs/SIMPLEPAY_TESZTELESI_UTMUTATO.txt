================================================================================
  LOMEDU USER WEB - SIMPLEPAY INTEGR√ÅCI√ìS TESZTEL√âSI √öTMUTAT√ì
  SimplePay IT Support Tesztel√©shez
  FRISS√çTVE: 2025.10.24 - V√©gleges verzi√≥
  Verzi√≥: 1.0.1+4
================================================================================

TARTALOMJEGYZ√âK
---------------
1. Bevezet√©s √©s El√©rhet≈ës√©gek
2. Teszt Felhaszn√°l√≥ Adatok
3. SimplePay 9.6 K√∂vetelm√©nyek Teljes√≠t√©se
4. Tesztel√©si L√©p√©sek (9.6.1 - 9.6.6)
5. Speci√°lis Teszt Eszk√∂z√∂k
6. Backend Implement√°ci√≥ R√©szletek
7. IPN/Webhook Konfigur√°ci√≥
8. Audit √©s Monitoring
9. V√°rhat√≥ Eredm√©nyek
10. Hibaelh√°r√≠t√°s


================================================================================
1. BEVEZET√âS √âS EL√âRHET≈êS√âGEK
================================================================================

PROJEKT NEVE: Lomedu User Web
DOMAIN: https://lomedu-user-web.web.app
SIMPLEPAY K√ñRNYEZET: Sandbox (tesztel√©s) ‚Üí Production (√©les√≠t√©s)

ALKALMAZ√ÅS T√çPUSA: Flutter Web (Progressive Web App)
FIZET√âSI M√ìDSZER: OTP SimplePay v2.1 API
MERCHANT ID: [Sandbox √©s Production k√ºl√∂n]

FEJLESZT≈ê EL√âRHET≈êS√âG:
  Email: info@lomedu.hu
  Technikai kapcsolattart√≥: [N√©v]

DOKUMENT√ÅCI√ì:
  - SimplePay Spec: PaymentService_SimplePay_2.x_Payment_HU_251006.pdf
  - Implement√°ci√≥s √∫tmutat√≥: OTP_SIMPLEPAY_INTEGRATION_GUIDE.md
  - Audit eredm√©nyek: docs/SIMPLEPAY_ELES_AUDIT_EREDMENYEK.md


================================================================================
2. TESZT FELHASZN√ÅL√ì ADATOK
================================================================================

TESZT ACCOUNT (SimplePay IT Tesztel√©shez):
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  Email:    lomeduteszt@gmail.com
  Jelsz√≥:   Lomeduteszt55!
  T√≠pus:    Teszt felhaszn√°l√≥ (speci√°lis jogosults√°gokkal)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

BEJELENTKEZ√âSI URL:
  https://lomedu-user-web.web.app/login

BEJELENTKEZ√âS L√âP√âSEI:
  1. Nyissa meg a fenti URL-t
  2. Email mez≈ë: lomeduteszt@gmail.com
  3. Jelsz√≥ mez≈ë: Lomeduteszt55!
  4. "Bejelentkez√©s" gomb

FONTOS:
  - Ez a teszt felhaszn√°l√≥ SPECI√ÅLIS jogosults√°gokkal rendelkezik
  - Release build-ben is l√°tja a "Teszt eszk√∂z√∂k" szekci√≥t
  - Ezzel lehet tesztelni az email √©rtes√≠t√©seket √©s el≈ëfizet√©si √°llapotokat


================================================================================
3. SIMPLEPAY 9.6 K√ñVETELM√âNYEK TELJES√çT√âSE
================================================================================

A Lomedu User Web alkalmaz√°s 100%-ban megfelel a SimplePay v2.1 
specifik√°ci√≥nak √©s a 9.6 tesztel√©si protokollnak.

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ K√ñVETELM√âNY              ‚îÇ ST√ÅTUSZ  ‚îÇ IMPLEMENT√ÅCI√ì HELYE         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 9.6.1 Sikeres tranzakci√≥ ‚îÇ ‚úÖ K√âSZ  ‚îÇ Backend + Frontend Dialog   ‚îÇ
‚îÇ 9.6.2 Sikertelen         ‚îÇ ‚úÖ K√âSZ  ‚îÇ Backend + Frontend Dialog   ‚îÇ
‚îÇ 9.6.3 Id≈ët√∫ll√©p√©s        ‚îÇ ‚úÖ K√âSZ  ‚îÇ Backend + Frontend Dialog   ‚îÇ
‚îÇ 9.6.4 Megszak√≠tott       ‚îÇ ‚úÖ K√âSZ  ‚îÇ Backend + Frontend Dialog   ‚îÇ
‚îÇ 9.6.5 SimplePay Logo     ‚îÇ ‚úÖ K√âSZ  ‚îÇ Account oldal (l√°that√≥)     ‚îÇ
‚îÇ 9.6.6 Adattov√°bb√≠t√°s     ‚îÇ ‚úÖ K√âSZ  ‚îÇ Dialog + Backend valid√°ci√≥  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

√ñSSZES√çTETT MEGFELEL≈êS√âG: ‚úÖ 100%


================================================================================
4. TESZTEL√âSI L√âP√âSEK (SimplePay 9.6 Protokoll Szerint)
================================================================================

EL≈êK√âSZ√çT√âS:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
1. Bejelentkez√©s: lomeduteszt@gmail.com / Lomeduteszt55!
2. Navig√°l√°s: Fi√≥k adatok men√ºpont (bal fels≈ë sarok)
3. G√∂rget√©s le: 
   - El≈ëfizet√©si st√°tusz k√°rtya
   - "El≈ëfizet√©s meg√∫j√≠t√°sa" gomb (nagy, k√©k)
   - SimplePay logo
   - Fizet√©si el≈ëzm√©nyek (real-time lista) ‚Üê √öJ!
   - Teszt eszk√∂z√∂k (csak lomeduteszt@gmail.com-nak)


4.1 TESZT: 9.6.1 SIKERES TRANZAKCI√ì
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

L√âP√âSEK:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
1. Fi√≥k adatok oldalon: "El≈ëfizet√©s meg√∫j√≠t√°sa" gomb (nagy, k√©k)
2. Kattint√°s a gombra
3. Megjelenik: "Adattov√°bb√≠t√°si nyilatkozat" dialog
   ‚úÖ ELLEN≈êRIZEND≈ê:
      - Megjelenik a nyilatkozat sz√∂vege
      - "Elfogadom" checkbox van
      - "Nem fogadom el" √©s "Elfogadom √©s fizetek" gombok
4. "Elfogadom" checkbox bejel√∂l√©se
5. "Elfogadom √©s fizetek" gomb
6. SimplePay fizet≈ëoldalra redirect
7. Teszt k√°rtya adatok megad√°sa:
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ K√°rtyasz√°m: 4000 0000 0000 0002         ‚îÇ
   ‚îÇ Lej√°rat: 12/25 (b√°rmely j√∂v≈ëbeli)       ‚îÇ
   ‚îÇ CVV: 123                                 ‚îÇ
   ‚îÇ N√©v: Test User                           ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
8. "Fizet√©s" gomb megnyom√°sa
9. V√°rakoz√°s az authoriz√°ci√≥ra (1-2 mp)
10. Automatikus visszair√°ny√≠t√°s a Lomedu oldalra

ELV√ÅRT EREDM√âNY (9.6.1 K√∂vetelm√©ny):
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚úÖ Visszair√°ny√≠t√°s URL: /account?payment=success&orderRef=WEB_...
‚úÖ Megjelenik egy Dialog:
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ [üü¢] Sikeres tranzakci√≥                ‚îÇ
   ‚îÇ                                        ‚îÇ
   ‚îÇ A fizet√©s sikeresen megt√∂rt√©nt!        ‚îÇ
   ‚îÇ El≈ëfizet√©se aktiv√°lva lett...          ‚îÇ
   ‚îÇ                                        ‚îÇ
   ‚îÇ SimplePay tranzakci√≥azonos√≠t√≥:         ‚îÇ
   ‚îÇ WEB_xxxxx_xxxxxxxxxx                   ‚îÇ
   ‚îÇ                                        ‚îÇ
   ‚îÇ [ Rendben ]                            ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚úÖ IPN √ºzenet fogad√°sa (backend):
   - Firebase Functions log-ban l√°tszik:
     "[simplepayWebhook] updated payment to COMPLETED"

‚úÖ El≈ëfizet√©s aktiv√°lva:
   - Fi√≥k adatok oldalon: "Akt√≠v el≈ëfizet√©s" st√°tusz
   - Lej√°rati d√°tum: 30 nappal k√©s≈ëbbi d√°tum


4.2 TESZT: 9.6.2 SIKERTELEN TRANZAKCI√ì
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

L√âP√âSEK:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
1-6. Ugyanaz mint sikeres tesztn√©l
7. Sikertelen teszt k√°rtya megad√°sa:
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ K√°rtyasz√°m: 4000 0000 0000 0119         ‚îÇ
   ‚îÇ Lej√°rat: 12/25                           ‚îÇ
   ‚îÇ CVV: 123                                 ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
8. "Fizet√©s" gomb
9. Bank elutas√≠tja a tranzakci√≥t
10. Visszair√°ny√≠t√°s

ELV√ÅRT EREDM√âNY (9.6.2 K√∂vetelm√©ny - 3.13.3 Spec):
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚úÖ Visszair√°ny√≠t√°s URL: /account?payment=fail&orderRef=WEB_...
‚úÖ Megjelenik r√©szletes Dialog:
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ [üî¥] Sikertelen tranzakci√≥             ‚îÇ
   ‚îÇ                                        ‚îÇ
   ‚îÇ SimplePay tranzakci√≥azonos√≠t√≥:         ‚îÇ
   ‚îÇ WEB_xxxxx_xxxxxxxxxx                   ‚îÇ
   ‚îÇ                                        ‚îÇ
   ‚îÇ K√©rj√ºk, ellen≈ërizze a tranzakci√≥       ‚îÇ
   ‚îÇ sor√°n megadott adatok helyess√©g√©t.     ‚îÇ
   ‚îÇ                                        ‚îÇ
   ‚îÇ Amennyiben minden adatot helyesen      ‚îÇ
   ‚îÇ adott meg, a visszautas√≠t√°s ok√°nak     ‚îÇ
   ‚îÇ kivizsg√°l√°sa √©rdek√©ben k√©rj√ºk,         ‚îÇ
   ‚îÇ sz√≠veskedjen kapcsolatba l√©pni         ‚îÇ
   ‚îÇ k√°rtyakibocs√°t√≥ bankj√°val.             ‚îÇ
   ‚îÇ                                        ‚îÇ
   ‚îÇ [‚ÑπÔ∏è] Lehets√©ges okok:                  ‚îÇ
   ‚îÇ     Fedezethi√°ny, hib√°s adatok,        ‚îÇ
   ‚îÇ     vagy napi limit t√∫ll√©p√©se          ‚îÇ
   ‚îÇ                                        ‚îÇ
   ‚îÇ [ Bez√°r√°s ]  [ √öjrapr√≥b√°l√°s ]          ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

FONTOS ELLEN≈êRZEND≈ê ELEMEK (SimplePay 3.13.3 Spec):
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚úÖ SimplePay tranzakci√≥azonos√≠t√≥ L√ÅTHAT√ì (K√ñTELEZ≈ê!)
‚úÖ R√©szletes t√°j√©koztat√°s (adatok ellen≈ërz√©se)
‚úÖ Banki kapcsolatfelv√©teli javaslat
‚úÖ Lehets√©ges okok felsorol√°sa (√°ltal√°nos, NEM konkr√©t!)
‚úÖ "√öjrapr√≥b√°l√°s" gomb m≈±k√∂dik (‚Üí /account)

TILOS ELEMEK (SimplePay spec szerint):
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚ùå NEM jelenik meg a pontos ok (pl. "limitt√∫ll√©p√©s")
   ‚Üí Csak √°ltal√°nos lehets√©ges okok


4.3 TESZT: 9.6.3 ID≈êT√öLL√âP√âS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

L√âP√âSEK:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
1-6. Fizet√©s ind√≠t√°s, SimplePay oldalra redirect
7. Fizet≈ëoldalon: NE adjon meg k√°rtyaadatokat!
8. V√°rjon 30 percet (timeout be√°ll√≠t√°s)
9. Automatikus visszair√°ny√≠t√°s id≈ët√∫ll√©p√©s ut√°n

ELV√ÅRT EREDM√âNY (9.6.3 K√∂vetelm√©ny - 3.13.2 Spec):
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚úÖ Visszair√°ny√≠t√°s URL: /account?payment=timeout&orderRef=WEB_...
‚úÖ Megjelenik reszponz√≠v Dialog:
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ [üü†] Id≈ët√∫ll√©p√©s                       ‚îÇ
   ‚îÇ                                        ‚îÇ
   ‚îÇ √ñn t√∫ll√©pte a tranzakci√≥ elind√≠t√°s√°nak ‚îÇ
   ‚îÇ lehets√©ges maxim√°lis idej√©t.           ‚îÇ
   ‚îÇ                                        ‚îÇ
   ‚îÇ A fizet√©si id≈ëkeret (30 perc) lej√°rt,  ‚îÇ
   ‚îÇ miel≈ëtt elind√≠totta volna a fizet√©st.  ‚îÇ
   ‚îÇ A tranzakci√≥ nem j√∂tt l√©tre, √≠gy       ‚îÇ
   ‚îÇ bankk√°rty√°ja nem lett terhelve.        ‚îÇ
   ‚îÇ                                        ‚îÇ
   ‚îÇ [‚úÖ] Biztos√≠tjuk: Nem t√∂rt√©nt          ‚îÇ
   ‚îÇ      p√©nz√ºgyi terhel√©s.                ‚îÇ
   ‚îÇ                                        ‚îÇ
   ‚îÇ [ Bez√°r√°s ]  [ √öj fizet√©s ind√≠t√°sa ]   ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

FONTOS ELLEN≈êRZEND≈ê (SimplePay 3.13.2 Spec):
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚úÖ "√ñn t√∫ll√©pte..." vagy "Id≈ët√∫ll√©p√©s" sz√∂veg
‚úÖ Magyar√°zat: 30 perces id≈ëkeret
‚úÖ Biztos√≠t√°s: "Nem t√∂rt√©nt p√©nz√ºgyi terhel√©s"
‚ùå NINCS SimplePay tranzakci√≥azonos√≠t√≥ (HELYES! Nem volt fizet√©s!)
‚ùå NINCS "sikertelen fizet√©s" sz√∂veg (HELYES!)
‚úÖ Dialog reszponz√≠v (max 500px sz√©les, scrollozhat√≥)


4.4 TESZT: 9.6.4 MEGSZAK√çTOTT TRANZAKCI√ì
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

L√âP√âSEK:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
1-6. Fizet√©s ind√≠t√°s, SimplePay oldalra redirect
7. Fizet≈ëoldalon: "Vissza" gomb megnyom√°sa
8. Automatikus visszair√°ny√≠t√°s

ELV√ÅRT EREDM√âNY (9.6.4 K√∂vetelm√©ny - 3.13.1 Spec):
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚úÖ Visszair√°ny√≠t√°s URL: /account?payment=cancelled&orderRef=WEB_...
‚úÖ Megjelenik reszponz√≠v Dialog:
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ [‚ö™] Megszak√≠tott fizet√©s              ‚îÇ
   ‚îÇ                                        ‚îÇ
   ‚îÇ √ñn megszak√≠totta a fizet√©st.           ‚îÇ
   ‚îÇ                                        ‚îÇ
   ‚îÇ A fizet√©si folyamat megszak√≠t√°sra      ‚îÇ
   ‚îÇ ker√ºlt (a "Vissza" gomb megnyom√°s√°val  ‚îÇ
   ‚îÇ vagy a b√∂ng√©sz≈ë bez√°r√°s√°val).          ‚îÇ
   ‚îÇ A tranzakci√≥ nem j√∂tt l√©tre.           ‚îÇ
   ‚îÇ                                        ‚îÇ
   ‚îÇ [‚úÖ] Biztos√≠tjuk: Nem t√∂rt√©nt          ‚îÇ
   ‚îÇ      p√©nz√ºgyi terhel√©s.                ‚îÇ
   ‚îÇ                                        ‚îÇ
   ‚îÇ [ Bez√°r√°s ]  [ √öj fizet√©s ind√≠t√°sa ]   ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

FONTOS ELLEN≈êRZEND≈ê (SimplePay 3.13.1 Spec):
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚úÖ "√ñn megszak√≠totta..." vagy "Megszak√≠tott fizet√©s" sz√∂veg
‚úÖ Magyar√°zat: Vissza gomb / b√∂ng√©sz≈ë bez√°r√°s
‚úÖ Biztos√≠t√°s: "Nem t√∂rt√©nt p√©nz√ºgyi terhel√©s"
‚ùå NINCS SimplePay tranzakci√≥azonos√≠t√≥ (HELYES! Nem volt fizet√©s!)
‚ùå NINCS "sikertelen fizet√©s" sz√∂veg (HELYES!)
‚úÖ Dialog reszponz√≠v (max 500px sz√©les, scrollozhat√≥)


4.5 TESZT: 9.6.5 SIMPLEPAY LOGO MEGJELEN√çT√âSE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

L√âP√âSEK:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
1. Bejelentkez√©s
2. Navig√°l√°s: Fi√≥k adatok
3. G√∂rget√©s a lap alj√°ra

ELV√ÅRT EREDM√âNY (9.6.5 K√∂vetelm√©ny - 7. Fejezet Spec):
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚úÖ SimplePay logo l√°that√≥:
   - Helye: Fi√≥k adatok oldal, "El≈ëfizet√©s meg√∫j√≠t√°sa" gomb ut√°n
   - M√©ret: Reszponz√≠v (mobil: 90%, tablet: 450px, desktop: 482px)
   - K√©p: simplepay_bankcard_logos_left_482x40_new.jpg

‚úÖ Logo link m≈±k√∂dik:
   - Kattinthat√≥ (nem k√∂telez≈ë tesztelni)
   - C√©lja: Fizet√©si t√°j√©koztat√≥ (SimplePay k√∂vetelm√©ny)


4.6 TESZT: 9.6.6 ADATTOV√ÅBB√çT√ÅSI NYILATKOZAT
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

L√âP√âSEK:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
1. Bejelentkez√©s
2. Fi√≥k adatok ‚Üí "El≈ëfizet√©s meg√∫j√≠t√°sa" gomb
3. Megjelenik a nyilatkozat dialog

ELV√ÅRT EREDM√âNY (9.6.6 K√∂vetelm√©ny - 8. Fejezet Spec):
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚úÖ Adattov√°bb√≠t√°si nyilatkozat Dialog megjelenik:
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ Adattov√°bb√≠t√°si nyilatkozat            ‚îÇ
   ‚îÇ                                        ‚îÇ
   ‚îÇ [Teljes sz√∂veg a SimplePay spec        ‚îÇ
   ‚îÇ  8. fejezet szerint, magyar nyelven]   ‚îÇ
   ‚îÇ                                        ‚îÇ
   ‚îÇ Tudom√°sul veszem, hogy a(z)...         ‚îÇ
   ‚îÇ SimplePay Zrt., mint adatfeldolgoz√≥... ‚îÇ
   ‚îÇ                                        ‚îÇ
   ‚îÇ ‚òê Elfogadom                            ‚îÇ
   ‚îÇ                                        ‚îÇ
   ‚îÇ [ Nem fogadom el ] [ Elfogadom √©s...] ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚úÖ Backend valid√°ci√≥:
   - Ha nincs elfogadva ‚Üí Hiba: "Adattov√°bb√≠t√°si nyilatkozat sz√ºks√©ges"
   - Firestore mez≈ë: dataTransferConsentLastAcceptedDate
   - Egyszer elfogadva ‚Üí k√©s≈ëbb nem k√©rdezi √∫jra


================================================================================
5. SPECI√ÅLIS TESZT ESZK√ñZ√ñK (lomeduteszt@gmail.com felhaszn√°l√≥nak)
================================================================================

HOZZ√ÅF√âR√âS:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Bejelentkez√©s ut√°n: Fi√≥k adatok oldal
G√∂rget√©s: A lap alj√°ra
Szekci√≥: "Teszt eszk√∂z√∂k" (csak lomeduteszt@gmail.com l√°tja!)

FONTOS:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Ezek a gombok CSAK a "lomeduteszt@gmail.com" felhasfeelings√≥nak l√°that√≥ak!
  - Debug build-ben: L√°that√≥
  - Release build-ben: L√°that√≥ ‚Üê √öJ! (email alap√∫ ellen≈ërz√©s)
  - M√°s felhaszn√°l√≥knak: Nem l√°that√≥

EL√âRHET≈ê GOMBOK:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. "3 napos lej√°rat" gomb (NARANCS)                              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ FUNKCI√ì:                                                         ‚îÇ
‚îÇ   - Be√°ll√≠tja az el≈ëfizet√©st 3 napos lej√°ratra                   ‚îÇ
‚îÇ   - Automatikusan elk√ºldi az "expiry_warning" emailt             ‚îÇ
‚îÇ   - Teszteli az automatikus email √©rtes√≠t√©si rendszert           ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ HASZN√ÅLAT:                                                       ‚îÇ
‚îÇ   1. Kattint√°s a "3 napos lej√°rat" gombra                        ‚îÇ
‚îÇ   2. Meger≈ës√≠t√©s: "Be√°ll√≠t√°s" gomb                               ‚îÇ
‚îÇ   3. Email kik√ºld√©se: lomeduteszt@gmail.com-ra                   ‚îÇ
‚îÇ   4. Ellen≈ërz√©s: Email be√©rkezett?                               ‚îÇ
‚îÇ      T√°rgy: "El≈ëfizet√©sed hamarosan lej√°r - 3 nap h√°tra"         ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ V√ÅRHAT√ì EMAIL TARTALOM:                                          ‚îÇ
‚îÇ   Kedves Felhaszn√°l√≥!                                            ‚îÇ
‚îÇ   El≈ëfizet√©sed 3 nap m√∫lva lej√°r. Ne maradj le...                ‚îÇ
‚îÇ   Link: https://lomedu-user-web.web.app/subscription            ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ FIRESTORE V√ÅLTOZ√ÅSOK:                                            ‚îÇ
‚îÇ   - subscriptionEndDate: [MA + 3 NAP]                            ‚îÇ
‚îÇ   - lastReminder.expiry_warning: [TIMESTAMP]                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 2. "Lej√°rt √°llapot" gomb (PIROS)                                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ FUNKCI√ì:                                                         ‚îÇ
‚îÇ   - Be√°ll√≠tja az el≈ëfizet√©st lej√°rt √°llapotra                    ‚îÇ
‚îÇ   - Automatikusan elk√ºldi az "expired" emailt                    ‚îÇ
‚îÇ   - Teszteli a lej√°rat ut√°ni √©rtes√≠t√©si rendszert                ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ HASZN√ÅLAT:                                                       ‚îÇ
‚îÇ   1. Kattint√°s a "Lej√°rt √°llapot" gombra                         ‚îÇ
‚îÇ   2. Meger≈ës√≠t√©s: "Be√°ll√≠t√°s" gomb                               ‚îÇ
‚îÇ   3. Email kik√ºld√©se                                             ‚îÇ
‚îÇ   4. Ellen≈ërz√©s: Email be√©rkezett?                               ‚îÇ
‚îÇ      T√°rgy: "El≈ëfizet√©sed lej√°rt - √öj√≠tsd meg most!"             ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ V√ÅRHAT√ì EMAIL TARTALOM:                                          ‚îÇ
‚îÇ   Kedves Felhaszn√°l√≥!                                            ‚îÇ
‚îÇ   El≈ëfizet√©sed lej√°rt. √öj√≠tsd meg most...                        ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ FIRESTORE V√ÅLTOZ√ÅSOK:                                            ‚îÇ
‚îÇ   - subscriptionEndDate: [MA - 1 NAP]                            ‚îÇ
‚îÇ   - isSubscriptionActive: false                                  ‚îÇ
‚îÇ   - subscriptionStatus: 'expired'                                ‚îÇ
‚îÇ   - lastReminder.expired: [TIMESTAMP]                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 3. "Reset (ingyenes √°llapot)" gomb (K√âK)                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ FUNKCI√ì:                                                         ‚îÇ
‚îÇ   - Vissza√°ll√≠tja az el≈ëfizet√©st ingyenes (free) √°llapotra       ‚îÇ
‚îÇ   - 5 napos pr√≥baid≈ëszak be√°ll√≠t√°sa ‚Üê √öJ!                       ‚îÇ
‚îÇ   - T√∂rli az email eml√©keztet≈ëket (√∫jra lehet tesztelni)         ‚îÇ
‚îÇ   - Tiszta √°llapot l√©trehoz√°sa √∫jabb tesztekhez                  ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ HASZN√ÅLAT:                                                       ‚îÇ
‚îÇ   1. Kattint√°s a "Reset (ingyenes √°llapot)" gombra               ‚îÇ
‚îÇ   2. Meger≈ës√≠t√©s: "Vissza√°ll√≠t√°s" gomb                           ‚îÇ
‚îÇ   3. El≈ëfizet√©s t√∂rl√©se                                          ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ FIRESTORE V√ÅLTOZ√ÅSOK:                                            ‚îÇ
‚îÇ   - isSubscriptionActive: false                                  ‚îÇ
‚îÇ   - subscriptionStatus: 'free'                                   ‚îÇ
‚îÇ   - subscriptionEndDate: null                                    ‚îÇ
‚îÇ   - subscription: null                                           ‚îÇ
‚îÇ   - freeTrialEndDate: [MA + 5 NAP] ‚Üê √öJ!                        ‚îÇ
‚îÇ   - lastReminder: t√∂r√∂lve                                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò


TESZT FORGAT√ìK√ñNYV (EMAIL DUPLIK√ÅTUM V√âDELEM TESZTEL√âSE):
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
1. "3 napos lej√°rat" gomb ‚Üí Email KIK√úLDVE ‚úÖ
2. "3 napos lej√°rat" gomb √öJRA ‚Üí Email NEM K√úLDVE (duplik√°tum!) ‚úÖ
3. "Reset" gomb ‚Üí lastReminder t√∂r√∂lve
4. "3 napos lej√°rat" gomb ‚Üí Email √öJRA KIK√úLDVE ‚úÖ

Ez garant√°lja, hogy felhaszn√°l√≥nk√©nt szigor√∫an 1-1 email ker√ºl kik√ºld√©sre!


================================================================================
6. BACKEND IMPLEMENT√ÅCI√ì R√âSZLETEK
================================================================================

CLOUD FUNCTIONS (Firebase Functions, europe-west1 r√©gi√≥):
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

1. updatePaymentStatusFromCallback ‚Üê √öJ!
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   T√≠pus: Callable (HTTPS)
   Input: { orderRef, callbackStatus }
   Funkci√≥:
     - SimplePay browser callback alapj√°n azonnali status friss√≠t√©s
     - callbackStatus (success/fail/timeout/cancelled) ‚Üí Firestore status
     - Garant√°lt m≈±k√∂d√©s (service account jogosults√°g)
   Output: { success, status }
   
   FONTOS: Ez biztos√≠tja hogy sikertelen/timeout/cancelled fizet√©sekn√©l is
   azonnal friss√ºlj√∂n a status (nem kell v√°rni az IPN-re vagy manu√°lis query-re)

2. initiateWebPayment
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   T√≠pus: Callable (HTTPS)
   Input: { planId, userId }
   Funkci√≥:
     - Ellen≈ërzi: adattov√°bb√≠t√°si nyilatkozat elfogadva?
     - SimplePay START API h√≠v√°s
     - Fizet≈ëoldal URL gener√°l√°s
     - web_payments Firestore dokumentum l√©trehoz√°s
   Output: { success, paymentUrl, orderRef, amount }

2. simplepayWebhook
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   T√≠pus: HTTP (onRequest)
   URL: https://europe-west1-orlomed-f8f9f.cloudfunctions.net/simplepayWebhook
   Funkci√≥:
     - SimplePay IPN √ºzenet fogad√°sa
     - Al√°√≠r√°s valid√°l√°s (HMAC-SHA384, timingSafeEqual)
     - El≈ëfizet√©s aktiv√°l√°s
     - IPN Confirm v√°lasz (receiveDate + Signature header)
   Spec: SimplePay 3.14 fejezet (IPN)

3. confirmWebPayment
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   T√≠pus: Callable
   Input: { orderRef }
   Funkci√≥:
     - SimplePay QUERY API h√≠v√°s
     - Tranzakci√≥ st√°tusz lek√©rdez√©s
     - El≈ëfizet√©s aktiv√°l√°s (ha SUCCESS)
   Output: { success, status }

4. queryPaymentStatus
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   T√≠pus: Callable
   Input: { orderRef }
   Funkci√≥:
     - Manu√°lis st√°tusz lek√©rdez√©s
     - SimplePay QUERY API
     - Auto-complete ha sikeres de m√©g nem friss√ºlt
   Output: { success, status, transactionId, details }

5. checkSubscriptionExpiryScheduled
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   T√≠pus: Scheduled (Cron: 0 2 * * *)
   Fut√°s: Minden nap 02:00 (Europe/Budapest)
   Funkci√≥:
     - 1-3 nap m√∫lva lej√°r√≥ el≈ëfizet√©sek keres√©se
     - expiry_warning email k√ºld√©se
     - Lej√°rt el≈ëfizet√©sek keres√©se
     - expired email k√ºld√©se
     - Duplik√°tum v√©delem (lastReminder mez≈ë)


AL√Å√çR√ÅSI MECHANIZMUS (SimplePay 3.2 Spec):
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Algoritmus: HMAC-SHA384
Encoding: Base64
Header n√©v: "Signature"
Valid√°ci√≥: crypto.timingSafeEqual (timing attack v√©delem)

START k√©r√©s p√©lda:
  Body: JSON string (salt, merchant, orderRef, currency, ...)
  Signature: HMAC-SHA384(SECRET_KEY, body) ‚Üí Base64

IPN v√°lasz p√©lda:
  Body: { receiveDate: ISO 8601 timestamp }
  Signature: HMAC-SHA384(SECRET_KEY, body) ‚Üí Base64


TIMEOUT FORM√ÅTUM (SimplePay 3.3 Spec):
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Format: ISO 8601, milliszekundumok n√©lk√ºl
P√©lda: 2025-10-24T14:30:00Z
Be√°ll√≠t√°s: 30 perc a j√∂v≈ëben

K√≥d:
  const timeout = new Date(Date.now() + 30 * 60 * 1000)
    .toISOString()
    .replace(/\.\d{3}Z$/, 'Z');


K√ñRNYEZETEK (SimplePay 1.7 Spec):
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Sandbox: https://sandbox.simplepay.hu/payment/v2/
Production: https://secure.simplepay.hu/payment/v2/

V√°lt√°s: SIMPLEPAY_ENV environment variable (sandbox/production)


================================================================================
7. IPN/WEBHOOK KONFIGUR√ÅCI√ì
================================================================================

WEBHOOK URL (SimplePay Admin-ban be√°ll√≠tand√≥):
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
https://europe-west1-orlomed-f8f9f.cloudfunctions.net/simplepayWebhook

FIREBASE HOSTING ROUTING (firebase.json):
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
{
  "source": "/api/webhook/simplepay",
  "function": {
    "functionId": "simplepayWebhook",
    "region": "europe-west1",
    "pinTag": true
  }
}

IPN CONFIRM V√ÅLASZ (SimplePay 3.14 - K√ñTELEZ≈ê!):
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Response Body:
  {
    "receiveDate": "2025-10-24T12:34:56+02:00"
  }

Response Headers:
  Content-Type: application/json; charset=utf-8
  Signature: [HMAC-SHA384 base64]

Ez teljes m√©rt√©kben megfelel a SimplePay v2.1 specifik√°ci√≥nak!


================================================================================
8. AUDIT √âS MONITORING
================================================================================

AUDIT LOG (Firestore Kollekci√≥: payment_audit_logs):
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Minden fizet√©si tranzakci√≥ napl√≥zva van:

Rekord strukt√∫ra:
  {
    userId: "user123",
    orderRef: "WEB_user123_1234567890",
    action: "PAYMENT_INITIATED" | "PAYMENT_CONFIRMED" | 
            "WEBHOOK_RECEIVED" | "PAYMENT_INITIATION_FAILED",
    planId: "monthly_premium_prepaid",
    amount: 4350,
    environment: "sandbox" | "production",
    timestamp: Firestore Timestamp,
    metadata: {
      simplePayTransactionId: "...",
      userEmail: "...",
      errorCodes: [],
      ...
    }
  }

ELLEN≈êRZ√âS:
  Firebase Console ‚Üí Firestore ‚Üí payment_audit_logs kollekci√≥
  Minden teszt tranzakci√≥ bejegyz√©st hoz l√©tre!


CLOUD FUNCTIONS LOGS:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Firebase Console ‚Üí Functions ‚Üí Logs

Keresend≈ë log bejegyz√©sek:
  [initiateWebPayment] input { planId, userId }
  [simplepayWebhook] received { status, orderRef }
  [simplepayWebhook] updated payment to COMPLETED
  [queryPaymentStatus] auto-completed payment


================================================================================
9. V√ÅRHAT√ì EREDM√âNYEK (TESZTEL√âS SOR√ÅN)
================================================================================

9.6.1 SIKERES TRANZAKCI√ì - TELJES FOLYAMAT:
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

1. Fizet√©s ind√≠t√°s
   ‚Üí Frontend log: "Adattov√°bb√≠t√°si nyilatkozat elfogadva"
   ‚Üí Backend log: "[initiateWebPayment] outgoing payload"

2. SimplePay START API v√°lasz
   ‚Üí paymentUrl gener√°lva
   ‚Üí Firestore: web_payments/{orderRef} l√©trehozva (status: INITIATED)
   ‚Üí Audit log: PAYMENT_INITIATED

3. SimplePay fizet≈ëoldal
   ‚Üí K√°rtyaadatok megad√°sa
   ‚Üí Authoriz√°ci√≥ sikeres

4. SimplePay IPN √ºzenet
   ‚Üí Backend log: "[simplepayWebhook] received { status: SUCCESS }"
   ‚Üí Al√°√≠r√°s valid√°l√°s: SIKERES
   ‚Üí Firestore: users/{uid} el≈ëfizet√©s aktiv√°l√°s
   ‚Üí Firestore: web_payments/{orderRef} status: COMPLETED
   ‚Üí Audit log: WEBHOOK_RECEIVED
   ‚Üí IPN Confirm v√°lasz (receiveDate + Signature)

5. Visszair√°ny√≠t√°s
   ‚Üí URL: /account?payment=success&orderRef=...
   ‚Üí Dialog megjelen√≠t√©s
   ‚Üí SimplePay tranzakci√≥azonos√≠t√≥ l√°that√≥


9.6.2 SIKERTELEN - TELJES FOLYAMAT (Friss√≠tett!):
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

1-3. Ugyanaz mint sikeres
4. Authoriz√°ci√≥ SIKERTELEN (4000 0000 0000 0119 k√°rtya)
5. Visszair√°ny√≠t√°s
   ‚Üí URL: /account?payment=fail&orderRef=...
   ‚Üí updatePaymentStatusFromCallback function automatikusan h√≠v√≥dik ‚Üê √öJ!
   ‚Üí web_payments status AZONNAL friss√ºl: FAILED ‚Üê √öJ!
   ‚Üí Dialog: SimplePay ID + r√©szletes t√°j√©koztat√°s
   ‚Üí Fizet√©si el≈ëzm√©nyek real-time friss√ºl: "Sikertelen" chip ‚Üê √öJ!
   ‚Üí Audit log: PAYMENT_INITIATED (m√°r l√©tezik)


9.6.3 ID≈êT√öLL√âP√âS - TELJES FOLYAMAT:
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

1-2. Ugyanaz
3. SimplePay fizet≈ëoldalon: V√ÅRJON 30+ percet
4. Automatikus timeout
5. Visszair√°ny√≠t√°s
   ‚Üí URL: /account?payment=timeout&orderRef=...
   ‚Üí Dialog: "Id≈ët√∫ll√©p√©s" + biztos√≠t√°s
   ‚Üí Tranzakci√≥ st√°tusz: TIMEOUT


9.6.4 MEGSZAK√çTOTT - TELJES FOLYAMAT:
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

1-2. Ugyanaz
3. SimplePay fizet≈ëoldalon: "Vissza" gomb
4. Visszair√°ny√≠t√°s
   ‚Üí URL: /account?payment=cancelled&orderRef=...
   ‚Üí Dialog: "Megszak√≠tott" + biztos√≠t√°s
   ‚Üí Tranzakci√≥ st√°tusz: CANCELLED


================================================================================
10. HIBAELH√ÅR√çT√ÅS
================================================================================

PROBL√âMA: "Adattov√°bb√≠t√°si nyilatkozat hi√°nyzik" hiba
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
OK: Backend valid√°ci√≥ m≈±k√∂dik
MEGOLD√ÅS:
  1. Fizet√©s ind√≠t√°sn√°l megjelenik a dialog
  2. "Elfogadom" checkbox bejel√∂l√©se
  3. "Elfogadom √©s fizetek" gomb

PROBL√âMA: SimplePay logo nem l√°that√≥
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
OK: M√©g nincs lescrollozva
MEGOLD√ÅS: G√∂rgess le a Fi√≥k adatok oldalon


PROBL√âMA: IPN webhook nem √©rkezik meg
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
ELLEN≈êRZ√âS:
  1. SimplePay Admin Panel ‚Üí Technikai adatok
  2. IPN URL be√°ll√≠tva:
     https://europe-west1-orlomed-f8f9f.cloudfunctions.net/simplepayWebhook
  3. Firebase Functions logs:
     firebase functions:log --only simplepayWebhook

PROBL√âMA: Teszt gombok nem l√°tszanak
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
ELLEN≈êRZ√âS:
  1. Bejelentkezett felhaszn√°l√≥: lomeduteszt@gmail.com?
  2. Fi√≥k adatok oldal: lescrollozva a lap alj√°ra?
  
  Ha tov√°bbra sem l√°tszik:
    - Ellen≈ërizd az email c√≠met (kis/nagybet≈±!)
    - Build √∫jra: flutter build web --release


PROBL√âMA: Email nem √©rkezik meg (teszt gombok)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
ELLEN≈êRZ√âS:
  1. Email c√≠m: lomeduteszt@gmail.com helyes?
  2. SPAM mapp√°ban van?
  3. Firebase Functions log:
     "Subscription reminder email sent to lomeduteszt@gmail.com"
  4. SMTP konfigur√°ci√≥: functions/index.js (mail.lomedu.hu)


================================================================================
√ñSSZEFOGLAL√ÅS - TESZTEL≈ê SZ√ÅM√ÅRA
================================================================================

BEJELENTKEZ√âSI ADATOK:
  URL: https://lomedu-user-web.web.app/login
  Email: lomeduteszt@gmail.com
  Jelsz√≥: Lomeduteszt55!

FI√ìK ADATOK OLDAL ELRENDEZ√âS:
  1. Felhaszn√°l√≥i adatok (n√©v, email)
  2. El≈ëfizet√©si st√°tusz k√°rtya
  3. "El≈ëfizet√©s meg√∫j√≠t√°sa" gomb (nagy, k√©k)
  4. SimplePay logo (linkkel)
  5. ‚≠ê Fizet√©si el≈ëzm√©nyek (real-time t√°bl√°zat) ‚Üê √öJ!
  6. Teszt eszk√∂z√∂k (csak lomeduteszt@gmail.com-nak)

K√ñTELEZ≈ê TESZTEK (SimplePay 9.6):
  ‚úÖ 9.6.1 Sikeres fizet√©s (4000 0000 0000 0002)
  ‚úÖ 9.6.2 Sikertelen fizet√©s (4000 0000 0000 0119)
  ‚úÖ 9.6.3 Id≈ët√∫ll√©p√©s (v√°rakoz√°s > 30 perc)
  ‚úÖ 9.6.4 Megszak√≠tott (Vissza gomb)
  ‚úÖ 9.6.5 SimplePay logo l√°that√≥
  ‚úÖ 9.6.6 Adattov√°bb√≠t√°si nyilatkozat

SPECI√ÅLIS TESZTEK (Email rendszer):
  ‚úÖ "3 napos lej√°rat" gomb ‚Üí expiry_warning email
  ‚úÖ "Lej√°rt √°llapot" gomb ‚Üí expired email
  ‚úÖ Duplik√°tum v√©delem tesztel√©se
  ‚úÖ "Reset" gomb ‚Üí √∫jra tesztelhet≈ës√©g + 5 napos trial

√öJ FUNKCI√ìK (2025.10.24):
  ‚≠ê Real-time fizet√©si el≈ëzm√©nyek (automatikus friss√≠t√©s)
  ‚≠ê Automatikus status friss√≠t√©s (callback alapj√°n)
  ‚≠ê 5 napos trial reset
  ‚≠ê Teszt eszk√∂z√∂k release build-ben is (email alap√∫)
  ‚≠ê Automatikus verzi√≥friss√≠t√©s (h√°tt√©rben)

BACKEND ELLEN≈êRZ√âS:
  ‚úÖ IPN webhook m≈±k√∂d√©s (Functions logs)
  ‚úÖ Audit log bejegyz√©sek (Firestore)
  ‚úÖ Al√°√≠r√°s valid√°l√°s
  ‚úÖ Timeout form√°tum
  ‚úÖ updatePaymentStatusFromCallback function

ST√ÅTUSZ: PRODUCTION READY
  - SimplePay 9.6 protokoll: 100% MEGFELEL
  - Backend: 12 Cloud Function
  - Frontend: Dial√≥gok + Real-time el≈ëzm√©nyek
  - Email: Automatikus (2x naponta cron)
  - Teszt eszk√∂z√∂k: Release build-ben is
  - Verzi√≥: 1.0.1+4

K√ñVETKEZ≈ê L√âP√âS: SimplePay IT Support √©les√≠t√©si teszt ‚úÖ


================================================================================
KAPCSOLATFELV√âTEL
================================================================================

K√©rd√©s eset√©n:
  Email: info@lomedu.hu
  SimplePay support: itsupport@simplepay.com

Technikai dokument√°ci√≥:
  - docs/SIMPLEPAY_ELES_AUDIT_EREDMENYEK.md
  - OTP_SIMPLEPAY_INTEGRATION_GUIDE.md
  - SIMPLEPAY_ELES_GYORSINDITO.md


================================================================================
FIZET√âSI EL≈êZM√âNYEK - REAL-TIME M≈∞K√ñD√âS
================================================================================

A Fi√≥k adatok oldalon tal√°lhat√≥ "Fizet√©si el≈ëzm√©nyek" szekci√≥:

JELLEMZ≈êK:
  ‚≠ê Real-time friss√≠t√©s (StreamBuilder)
  ‚≠ê Automatikus update amikor status v√°ltozik
  ‚≠ê Nincs sz√ºks√©g manu√°lis friss√≠t√©sre
  ‚≠ê Desktop: T√°bl√°zat n√©zet (D√°tum, Le√≠r√°s, √ñsszeg, St√°tusz)
  ‚≠ê Mobil: K√°rtya n√©zet (reszponz√≠v)

ST√ÅTUSZ CHIPEK:
  üü¢ Sikeres - Z√∂ld h√°tt√©r
  üî¥ Sikertelen - Piros h√°tt√©r
  üü° Folyamatban - S√°rga h√°tt√©r (INITIATED)
  ‚ö™ Megszak√≠tott - Sz√ºrke h√°tt√©r
  üü† Id≈ët√∫ll√©p√©s - Narancs h√°tt√©r

AUTOMATIKUS FRISS√çT√âS:
  1. Fizet√©s ind√≠t√°s ‚Üí web_payments: INITIATED ‚Üí "Folyamatban"
  2. SimplePay callback ‚Üí updatePaymentStatusFromCallback
  3. Status friss√ºl: FAILED/COMPLETED/stb
  4. Fizet√©si el≈ëzm√©nyek AUTOMATIKUSAN friss√ºl (< 1 sec) ‚ö°
  5. Megfelel≈ë chip jelenik meg

NINCS SZ√úKS√âG:
  ‚ùå Friss√≠t√©s gombra (t√∂r√∂lve)
  ‚ùå F5-re
  ‚ùå √öjrat√∂lt√©sre


================================================================================
V√âG - SimplePay Tesztel√©si √ötmutat√≥
K√©sz√≠tve: 2025.10.24
Friss√≠tve: 2025.10.24 (V√©gleges)
Verzi√≥: 1.0.1+4
SimplePay API: v2.1
St√°tusz: PRODUCTION READY ‚úÖ
Real-time: StreamBuilder ‚ö°
================================================================================

